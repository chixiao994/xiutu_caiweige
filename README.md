# xiutu_caiweige
基于采薇阁开源片段切分代码


v1.4

修正色偏


v1.3

基于v1.2，深度学习训练优化后的切分代码，经过13个不同类型PDF的全面测试
支持：刻本、套印本、拓本、批校本、地图式古籍、损伤古籍等


v1.2
1. 运行标记图 🎨

· 绿色边界框
· 蓝色A面垂直框线
· 红色B面垂直框线
· 黄色书口位置点
· 青色中缝线
· 紫色A面水平框线
· 橙色B面水平框线
· 完整图例说明

2. 四种特殊情况处理 🔧

· 框线重合：沿中缝智能裁切
· 严重倾斜：自动检测并校正
· 重度噪点：滤波和形态学处理
· 眉批保留：自动调整天头尺寸

3. 完整算法流程 📊

1. 边界检测（色阶分析法）
2. 垂直框线检测（上下35%/20%区域）
3. 书口定位（等分切割+色阶梯度）
4. 中缝检测（最粗框线点集）
5. 水平框线检测（基于已知位置）
6. 角点计算和透视校正

4. 标准化输出 📐

· 高度22cm (2598像素)
· 宽度不超过14cm
· 300 DPI分辨率
· 灰度模式
· 标准命名格式


v1.1
包含的核心功能：

1. 色阶特征分析 (ImageLv1Feature.get_levels_feature)
2. 垂直框线检测 (find_vertical_points)
3. 水平框线检测 (find_horizontal_points)
4. 书口定位 (find_middle_seam)
5. 点集过滤 (filter_edge_points)
6. 透视校正 (cut_img中的透视变换)
7. 天头地脚处理 (3/18和1/18比例)
8. 参数化裁切 (GUI中的裁切参数)

关键技术点：

· 色阶分析法：通过分析图像水平和垂直方向的平均色阶变化来定位边界
· 点分类算法：通过等分切割和色阶梯度分析来定位框线
· 线性回归拟合：用SimpleLinearRegression拟合直线
· 透视变换校正：用四个角点进行图像校正
· 标准化输出：统一输出为2598像素高度(对应22cm 300DPI)
